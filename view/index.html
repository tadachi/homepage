<!DOCTYPE html>
<html lang='en' ng-app='app'>
    <head>
        <meta content='text/html; charset=utf-8' http-equiv='content-type'>
        <title>Template</title>
        <link rel='stylesheet' href='/css/main.css'>
        <!--load JQuery before Angular-->
        <script src='js/jquery-2.1.1.min.js'></script>
        <!-- Angularjs -->
        <script src='js/angular.1.3.0b11.js'></script>

<script>
    var app = angular.module('app', []);

    function calcResolutions() {
        var offset = 25; //Height for our header and footer
        var heightOffset = 50;

        var currWinWidth = $(window).width();
        var currWinHeight = $(window).height();

        var containerWidth = (.54 * currWinWidth); //.54 is a % of the max width of $(window) or browserwidth.
        var containerHeight = (currWinHeight - heightOffset);

        var headerPanelWidth = Math.floor(.40 * currWinWidth);
        var headerPanelHeight = Math.floor(offset);

        var headerLeftPanelWidth = Math.floor(.07 * currWinWidth)
        var headerLeftPanelHeight = Math.floor(offset)

        var headerRightPanelWidth = Math.floor(.07 * currWinWidth)
        var headerRightPanelHeight = Math.floor(offset)

        var leftPanelWidth = Math.floor(0.07 * currWinWidth); // divide the left, right, center panel width between the max window width.
        var leftPanelHeight = Math.floor(currWinHeight - offset*2 - heightOffset);

        var rightPanelWidth = Math.floor(0.07 * currWinWidth);
        var rightPanelHeight = Math.floor(currWinHeight - offset*2 - heightOffset);

        var centerPanelWidth = Math.floor(0.40 * currWinWidth);
        var centerPanelHeight = Math.floor(currWinHeight - offset*2 - heightOffset);

        var footerPanelWidth = Math.floor(.54 * currWinWidth);
        var footerPanelHeight = Math.floor(offset);

        return {
                containerW: containerWidth, containerH: containerHeight,
                headerW: headerPanelWidth, headerH: headerPanelHeight,
                headerLeftW: headerLeftPanelWidth, headerLeftH: headerLeftPanelHeight,
                headerRightW: headerRightPanelWidth, headerRightH: headerRightPanelHeight,
                footerW: footerPanelWidth, footerH: footerPanelHeight,
                leftW: leftPanelWidth, leftH: leftPanelHeight,
                rightW: rightPanelWidth, rightH: rightPanelHeight,
                centerW: centerPanelWidth, centerH: centerPanelHeight
                };
    }

    function applyResolutions() {
        res = calcResolutions();
        $('#container').css('width', res.containerW);
        $('#container').css('height', res.containerH);

        $('#header').css('width',res.headerW);
        $('#header').css('height',res.headerH);

        $('#headerleft').css('width',res.headerLeftW);
        $('#headerleft').css('height',res.headerLeftH);

        $('#headerright').css('width',res.headerRightW);
        $('#headerright').css('height',res.headerRightH);

        $('#left').css('width', res.leftW);
        $('#left').css('height', res.leftH);
        $('#left li').css('width', res.leftW-10);

        $('#right').css('width', res.rightW);
        $('#right').css('height', res.rightH);

        $('#center').css('width', res.centerW);
        $('#center').css('height', res.centerH);

        $('#footer').css('width', res.footerW);
        $('#footer').css('height', res.footerH);
    }

    $( document ).ready(function() {
        applyResolutions();
    });

    app.directive('isOnline', function() {
        return {
            $scope: {
                value: '=',
                href: '=',
                link: '@',
            },
            restrict: 'AEC',
//             controller: function($scope, $element){
//                 $scope.value = 'pinging...';
//                 $scope.href = $element.attr('link');
//                 console.log($element.attr('link'));
//             },
            cache: false,
            link: function($scope, $element) {
                $scope.value = 'pinging...';
                $scope.href = $element.attr('link');
               //var url = 'http://whateverorigin.org/get?url=' + encodeURIComponent($element.attr('link')) + '&callback=?';
                var url = 'http://whateverorigin.org/get?url=' + $element.attr('link') + '&callback=?';
                console.log(url);
//                 $.ajax({
//                     url: url,
//                     timeout: 1000,
//                     dataType: 'json',
//                     statusCode: {
//                         200: function() {
//                             $scope.$apply(function() {
//                                 $scope.value = '200';
//                             });
//                         },
//                         404: function() {
//                             $scope.$apply(function() {
//                                 $scope.value = 'loading';
//                             });
//                         },
//                         500: function() {
//                             $scope.$apply(function() {
//                                 $scope.value = '500';
//                             });
//                         }
//                     },
//                 })

            }
        };
    });

</script>

    </head>
    <body>

        <div id='container'>

            <div id='headerleft' class='panel'>

            </div>

            <div id='header' class='panel'>
            About Projects Resume Blog Links
            </div>

            <div id='headerright' class='panel'>

            </div>

            <div id='left' class='panel'>
            </div>

            <div id='center' class='panel'>
                <div id='centerinfo'>
                    <h2>About</h2>
                    <p>My name is Takumi Adachi is a Canadian developer based in Victoria BC. In my free time, I develop web apps to tackle very specific problems.</p>
                    He is currently using writing code in HTML/CSS, Javascript and developing using NodeJS and its various plugins. Programming languages he has worked with
                    include: Java, C, Python, PHP. Takumi develops his code in vim, Eclipse, and notepad++.
                    <p>He has a diploma in information technology from Camosun College (Victoria, BC).</p>
                    </p>
                    <h2>
                    Latest Projects:
                    </h2>
                    <ul>
                        <li>
                            <is-online link='http://srl.takbytes.com'><a href='{{href}}'>srlplayer</a> <a href='https://github.com/tadachi/srlplayer'>(github)</a> - a twitchstreamer for speedrunners from speedrunslive.com {{value}}</is-online>

                        </li>
                        <li>
                            <is-online link='http://mtc.takbytes.com'><a href={{href}}>multitwitchchat</a> <a href='https://github.com/tadachi/multitwitchchat'>(github)</a> - a twitchstreamer for speedrunners from speedrunslive.com {{value}}</is-online>
                            </is-online>
                        </li>
<!--                         <li>
                            <a href='http://asdfklasdlfajsdljfas.ca' is-online>asdf</a> - a twitchstreamer for speedrunners from speedrunslive.com -->
                             <div id='result'></div>
                        </li>
                    </ul>
                    <h2>
                    Related Links:
                    </h2>
                    <ul>
                        <li>
                            My <a href='{{link}}'>github</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div id='right' class='panel'>
            </div>

            <div id='footer' class='panel'>
            </div>
        </div>

    </body>
</html>
